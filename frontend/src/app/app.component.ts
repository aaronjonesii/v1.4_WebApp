import { Component, OnDestroy, OnInit } from '@angular/core';
import { filter, takeUntil } from "rxjs/operators";
import { AuthService } from "@auth0/auth0-angular";
import { NavigationEnd, Router } from "@angular/router";
import { UrlService } from "./shared/utils/services/url.service";
import { ExtrasService } from "./shared/utils/services/extras.service";
import { SIDEBAR_MENU_ITEMS } from "./shared/utils/menus/sidebar-menu";
import { Subject } from "rxjs";
import { AdminService } from "./shared/utils/services/admin.service";
import { NbIconLibraries } from '@nebular/theme';

export const HOME_PAGE_TITLE = 'Anonymous Cybersecurity';

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.scss']
})
export class AppComponent implements OnInit, OnDestroy  {
  private unsub$: Subject<any> = new Subject<any>();
  is_frontend_admin = false;
  previousUrl!: string;
  currentUrl!: string;
  SIDEBAR_MENU = SIDEBAR_MENU_ITEMS;

  constructor(
    private auth: AuthService,
    public _router: Router,
    private urlService: UrlService,
    private admin: AdminService,
    private extras: ExtrasService,
    private iconLibraries: NbIconLibraries
  ) {
    // Register FontAwesome Icons
    this.iconLibraries.registerFontPack('font-awesome', { iconClassPrefix: 'fa', packClass: 'fa' });
    // Register Custom Icons
    this.iconLibraries.registerSvgPack('custom-icons', {
      'discord': '<svg viewBox="0 0 245 240"><path d="M104.4 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1.1-6.1-4.5-11.1-10.2-11.1zM140.9 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1s-4.5-11.1-10.2-11.1z"/><path d="M189.5 20h-134C44.2 20 35 29.2 35 40.6v135.2c0 11.4 9.2 20.6 20.5 20.6h113.4l-5.3-18.5 12.8 11.9 12.1 11.2 21.5 19V40.6c0-11.4-9.2-20.6-20.5-20.6zm-38.6 130.6s-3.6-4.3-6.6-8.1c13.1-3.7 18.1-11.9 18.1-11.9-4.1 2.7-8 4.6-11.5 5.9-5 2.1-9.8 3.5-14.5 4.3-9.6 1.8-18.4 1.3-25.9-.1-5.7-1.1-10.6-2.7-14.7-4.3-2.3-.9-4.8-2-7.3-3.4-.3-.2-.6-.3-.9-.5-.2-.1-.3-.2-.4-.3-1.8-1-2.8-1.7-2.8-1.7s4.8 8 17.5 11.8c-3 3.8-6.7 8.3-6.7 8.3-22.1-.7-30.5-15.2-30.5-15.2 0-32.2 14.4-58.3 14.4-58.3 14.4-10.8 28.1-10.5 28.1-10.5l1 1.2c-18 5.2-26.3 13.1-26.3 13.1s2.2-1.2 5.9-2.9c10.7-4.7 19.2-6 22.7-6.3.6-.1 1.1-.2 1.7-.2 6.1-.8 13-1 20.2-.2 9.5 1.1 19.7 3.9 30.1 9.6 0 0-7.9-7.5-24.9-12.7l1.4-1.6s13.7-.3 28.1 10.5c0 0 14.4 26.1 14.4 58.3 0 0-8.5 14.5-30.6 15.2z"/></svg>',
      'poocoin': '<svg id="Layer_1" data-name="Layer 1" viewBox="0 0 122.88 122.88"><defs><style>.cls-1{fill:#fdfdfd;}.cls-2{fill:#020101;}.cls-3{fill:#4d4d4d;}.cls-4{fill:#666;}.cls-5{fill:#696969;}.cls-6{fill:#825c3c;}.cls-7{fill:#6b4b32;}.cls-8{fill:#936747;}.cls-9{fill:#926646;}.cls-10{fill:#926743;}.cls-11{fill:#010101;}.cls-12{fill:#835d3c;}</style></defs><path class="cls-1" d="M490.49942,561.88H439V439l122.88,0V561.88l-55.57146,0a6.563,6.563,0,0,1,1.07485-.2382,176.0909,176.0909,0,0,0,23.30742-2.42484c6.30295-1.19459,12.3783-3.03772,17.7908-6.63608,12.66183-8.41788,15.1223-23.7273,5.705-35.5112a30.81575,30.81575,0,0,0-8.3706-7.24509c.1241-.20981.22172-.37924.32341-.5462,3.1072-5.10133,4.3705-10.4678,2.33974-16.30557a17.70227,17.70227,0,0,0-6.58634-8.59813c-3.09624-2.23412-6.36074-4.23951-9.59268-6.27994a32.54775,32.54775,0,0,1-9.57071-8.54883c-3.99052-5.647-4.206-11.90794-.61333-17.68664a18.57674,18.57674,0,0,1,4.92837-5.15622,3.93322,3.93322,0,0,0,1.82379-4.01653c-.30218-1.7059-1.66011-2.43771-3.13947-2.72015a28.89246,28.89246,0,0,0-5.79967-.63871,47.84411,47.84411,0,0,0-20.28664,4.89644c-9.31689,4.49963-17.19529,10.96161-24.49369,18.14415a51.11386,51.11386,0,0,0-6.148,7.887c-2.21,3.25971-2.43086,7.173-3.01714,10.93339-14.12488,2.44184-22.55444,22.20315-14.44773,33.92091-.91188.70038-1.84034,1.38252-2.73554,2.10582-9.99633,8.07675-11.7827,23.66126-.71175,33.18773a32.31222,32.31222,0,0,0,10.552,5.95912c8.95894,3.1319,18.28549,4.2911,27.68262,5.05071C487.71878,561.52574,489.10753,561.72223,490.49942,561.88Z" transform="translate(-439 -439)"/><path class="cls-2" d="M490.49942,561.88c-1.39189-.15777-2.78064-.35426-4.17616-.46707-9.39713-.75961-18.72368-1.91881-27.68262-5.05071a32.31222,32.31222,0,0,1-10.552-5.95912c-11.071-9.52647-9.28458-25.111.71175-33.18773.8952-.7233,1.82366-1.40544,2.73554-2.10582-8.10671-11.71776.32285-31.47907,14.44773-33.92091.58628-3.76039.80713-7.67368,3.01714-10.93339a51.11386,51.11386,0,0,1,6.148-7.887c7.2984-7.18254,15.1768-13.64452,24.49369-18.14415a47.84411,47.84411,0,0,1,20.28664-4.89644,28.89246,28.89246,0,0,1,5.79967.63871c1.47936.28244,2.83729,1.01425,3.13947,2.72015a3.93322,3.93322,0,0,1-1.82379,4.01653,18.57674,18.57674,0,0,0-4.92837,5.15622c-3.59265,5.7787-3.37719,12.03968.61333,17.68664a32.54775,32.54775,0,0,0,9.57071,8.54883c3.23194,2.04043,6.49644,4.04582,9.59268,6.27994a17.70227,17.70227,0,0,1,6.58634,8.59813c2.03076,5.83777.76746,11.20424-2.33974,16.30557-.10169.167-.19931.33639-.32341.5462a30.81575,30.81575,0,0,1,8.3706,7.24509c9.41727,11.7839,6.9568,27.09332-5.705,35.5112-5.4125,3.59836-11.48785,5.44149-17.7908,6.63608a176.0909,176.0909,0,0,1-23.30742,2.42484,6.563,6.563,0,0,0-1.07485.2382h-3.11392q-1.19046-.09609-2.38093-.1922l-5.05868-.00626-1.90214.19846Zm7.633-109.0198-.00622-.01446c-.38452.20116-.7854.37639-1.15113.60732a95.50457,95.50457,0,0,0-17.28388,14.25412,37.50248,37.50248,0,0,0-4.03415,5.01191,13.89392,13.89392,0,0,0-2.61327,7.68751,1.23676,1.23676,0,0,0,.67381.9644c2.3327.48529,4.68539.87446,7.032,1.293.35856.15475.73257.28151,1.07292.46926a17.77253,17.77253,0,0,1,3.66722,2.1306,3.22186,3.22186,0,0,1-1.37163,5.568,5.05734,5.05734,0,0,1-2.56671-.059c-2.149-.56822-4.25761-1.28926-6.38228-1.9495a14.31077,14.31077,0,0,0-7.43127-.73256,17.41156,17.41156,0,0,0-2.84577.82887,17.04982,17.04982,0,0,0-9.79655,13.29317,10.779,10.779,0,0,0,2.60028,9.46769,1.61779,1.61779,0,0,0,1.28147.51942,26.04119,26.04119,0,0,1,8.85153-1.03366c1.30711.29862,2.62748.54945,3.918.90793a7.47288,7.47288,0,0,1,4.2814,2.42046,3.02233,3.02233,0,0,1,.41022,3.45406,2.91487,2.91487,0,0,1-3.07584,1.79727,22.047,22.047,0,0,1-2.87162-.72109c-.91542-.244-1.82763-.50009-2.74126-.75085a9.64582,9.64582,0,0,0-1.2807-.22352c-5.74451-.243-10.509,2.04251-14.51527,5.939-6.50654,6.32828-6.21958,15.30359.60354,21.22356,5.60391,4.86213,12.5566,6.33419,19.56432,7.63375,3.0108.48182,6.00584,1.16571,9.0358,1.402,5.73616.44737,11.49236.63784,17.24023.935l1.68973-.00041c.35811.0115.71626.03385,1.07434.0329a145.58637,145.58637,0,0,0,23.54358-2.0226c4.19366-.69809,8.33378-1.71784,12.498-2.59246a69.07955,69.07955,0,0,0,7.485-3.07194,16.9638,16.9638,0,0,0,8.29113-18.6233,19.59889,19.59889,0,0,0-7.19108-10.72823,21.08653,21.08653,0,0,0-11.21252-4.93182c-.30662-.076-.61593-.1426-.91939-.22962a48.33035,48.33035,0,0,1-5.007-1.48575,3.51853,3.51853,0,0,1-2.33735-3.75993,3.83235,3.83235,0,0,1,3.76893-2.904,11.71571,11.71571,0,0,1,2.70773.29034c.92834.19532,1.82465.54284,2.735.82384,1.13383.35309,2.28128.6686,3.39661,1.07277a.9231.9231,0,0,0,1.38213-.61249c.52852-1.33247,1.18181-2.62093,1.63132-3.978a11.73328,11.73328,0,0,0,.39753-6.57964c-.89938-3.704-3.5096-5.96782-6.53244-7.87768-3.70352-2.33992-7.57145-4.44294-11.1339-6.97781-6.76818-4.81594-11.49636-11.009-11.98092-19.69879-.3112-5.58088.21462-10.9178,4.66548-15.214l-5.99909,1.16223a41.31385,41.31385,0,0,0-12.96642,5.36393Z" transform="translate(-439 -439)"/><path class="cls-3" d="M495.755,561.68154q2.52934.00313,5.05866.00615-.00788.096-.01437.19231h-5.03018Q495.76564,561.78053,495.755,561.68154Z" transform="translate(-439 -439)"/><path class="cls-4" d="M500.7993,561.88q.00651-.09624.01437-.19231,1.19049.09629,2.38095.19231Z" transform="translate(-439 -439)"/><path class="cls-5" d="M495.755,561.68154q.01062.099.01411.19846h-1.91625Z" transform="translate(-439 -439)"/><path class="cls-6" d="M537.20323,550.60143c-4.16427.87462-8.30439,1.89437-12.498,2.59246a145.58637,145.58637,0,0,1-23.54358,2.0226c-.35808.00095-.71623-.0214-1.07438-.03293q-.84488.00018-1.68969.00044c-5.74787-.2972-11.50407-.48767-17.24023-.935-3.03-.23632-6.025-.92021-9.03655-1.4023a7.99319,7.99319,0,0,1-1.74481-.94359c-2.83366-2.60345-5.75342-5.133-8.38679-7.92988a15.968,15.968,0,0,1-4.29144-14.061,14.667,14.667,0,0,1,3.81079-7.93662,13.38194,13.38194,0,0,1,6.24111-3.70145c.91363.25076,1.82584.50685,2.74126.75085a22.047,22.047,0,0,0,2.87162.72109,2.91487,2.91487,0,0,0,3.07584-1.79727,3.02233,3.02233,0,0,0-.41022-3.45406,7.47288,7.47288,0,0,0-4.2814-2.42046c-1.29047-.35848-2.61084-.60931-3.91886-.90794-.88534-.1024-1.775-.17389-2.65181-.32134-.38843-.06531-.93735-.17587-1.0969-.45006a12.50094,12.50094,0,0,1-1.09965-10.109A16.35862,16.35862,0,0,1,466.72,493.8582a13.86654,13.86654,0,0,1,7.4906-4.56025l.95844-.47456c2.12467.66024,4.23327,1.38128,6.38228,1.9495a5.05734,5.05734,0,0,0,2.56671.059,3.22186,3.22186,0,0,0,1.37163-5.568,17.77253,17.77253,0,0,0-3.66722-2.1306c-.34035-.18775-.71436-.31451-1.07374-.46947-.17227-.33168-.53671-.7-.48171-.98827a15.79855,15.79855,0,0,1,.948-3.6632c.94569-2.04952,2.0693-4.02222,3.19929-5.98046a89.96367,89.96367,0,0,1,13.15392-18.20211,4.42566,4.42566,0,0,0,.558-.984l.00644.01469q.1685-.015.33653-.03052l-.08526-.18839a41.29769,41.29769,0,0,1,12.966-5.36324,22.55156,22.55156,0,0,0-3.32338,10.33065,27.57832,27.57832,0,0,0,2.87231,14.783c2.21656,4.43817,5.678,7.80494,9.32048,11.0346,3.74149,3.31746,7.56579,6.55441,11.12131,10.06228a16.57891,16.57891,0,0,1,3.144,5.126,15.6126,15.6126,0,0,1,1.03895,7.36621c-.91032-.281-1.80663-.62852-2.735-.82384a11.71571,11.71571,0,0,0-2.70773-.29034,3.83235,3.83235,0,0,0-3.76893,2.904,3.51853,3.51853,0,0,0,2.33735,3.75993,48.33035,48.33035,0,0,0,5.007,1.48575c.30346.087.61277.1536.91938.22967.04457.15065.04517.34136.1404.44581,1.19924,1.31549,2.47809,2.56415,3.60887,3.93522a24.30007,24.30007,0,0,1,5.87513,12.92933,22.09091,22.09091,0,0,1-3.53809,15.08579C539.555,547.32557,538.35877,548.95011,537.20323,550.60143Zm-31.8118-22.00113a6.27085,6.27085,0,0,0-1.17739.09407,10.99617,10.99617,0,0,1-6.20135-.0416c-.97668-.29742-1.97442-.52569-2.96262-.78528-1.06429-.44358-2.10528-.959-3.19854-1.31324a3.28519,3.28519,0,0,0-3.83521,1.46292,2.88743,2.88743,0,0,0,.22885,3.83962,8.6927,8.6927,0,0,0,2.28908,1.87756,20.49855,20.49855,0,0,0,17.625,1.483,25.40165,25.40165,0,0,0,5.80685-3.22409,3.08323,3.08323,0,0,0,.74125-4.19558,3.27455,3.27455,0,0,0-4.01623-1.49793c-.759.22321-1.48117.57167-2.22005.86327l-.72371.42169-.63787.31018-1.27879.66632Zm7.117-13.13791a5.43583,5.43583,0,0,0,5.22478-5.57846,5.546,5.546,0,0,0-5.29147-5.44117,5.17283,5.17283,0,0,0-4.88242,5.32907C507.56252,512.92964,509.74574,515.43992,512.50839,515.46239Zm-22.68586.00041a5.51689,5.51689,0,0,0-.10195-11.01925,5.02778,5.02778,0,0,0-4.7862,5.231C484.91211,513.0113,486.97016,515.4483,489.82253,515.4628Z" transform="translate(-439 -439)"/><path class="cls-7" d="M535.52361,505.981a15.6126,15.6126,0,0,0-1.03895-7.36621,16.57891,16.57891,0,0,0-3.144-5.126c-3.55552-3.50787-7.37982-6.74482-11.12131-10.06228-3.64247-3.22966-7.10392-6.59643-9.32048-11.0346a27.57832,27.57832,0,0,1-2.87231-14.783A22.55156,22.55156,0,0,1,511.35,447.27828q3.00009-.58215,5.99946-1.16292c-4.45086,4.29622-4.97668,9.63314-4.66548,15.214.48456,8.68977,5.21274,14.88285,11.98092,19.69879,3.56245,2.53487,7.43038,4.63789,11.1339,6.97781,3.02284,1.90986,5.63306,4.1737,6.53244,7.87768a11.73328,11.73328,0,0,1-.39753,6.57964c-.44951,1.35707-1.1028,2.64553-1.63132,3.978a.9231.9231,0,0,1-1.38213.61249C537.80489,506.64962,536.65744,506.33411,535.52361,505.981Z" transform="translate(-439 -439)"/><path class="cls-8" d="M467.74961,518.2741a13.38194,13.38194,0,0,0-6.24111,3.70145,14.667,14.667,0,0,0-3.81079,7.93662,15.968,15.968,0,0,0,4.29144,14.061c2.63337,2.79684,5.55313,5.32643,8.38679,7.92988a7.99319,7.99319,0,0,0,1.74481.94359c-7.007-1.29929-13.95966-2.77135-19.56357-7.63348-6.82312-5.92-7.11008-14.89528-.60354-21.22356,4.00628-3.89653,8.77076-6.18206,14.51527-5.939A9.64582,9.64582,0,0,1,467.74961,518.2741Z" transform="translate(-439 -439)"/><path class="cls-7" d="M537.20323,550.60143c1.15554-1.65132,2.35177-3.27586,3.45879-4.95909a22.09091,22.09091,0,0,0,3.53809-15.08579,24.30007,24.30007,0,0,0-5.87513-12.92933c-1.13078-1.37107-2.40963-2.61973-3.60887-3.93522-.09523-.10445-.09583-.29516-.1404-.44581a21.08608,21.08608,0,0,1,11.21253,4.93177,19.59889,19.59889,0,0,1,7.19108,10.72823,16.9638,16.9638,0,0,1-8.29113,18.6233A69.07955,69.07955,0,0,1,537.20323,550.60143Z" transform="translate(-439 -439)"/><path class="cls-8" d="M474.21063,489.298a13.86654,13.86654,0,0,0-7.4906,4.56025,16.35862,16.35862,0,0,0-3.74054,6.42771,12.50094,12.50094,0,0,0,1.09965,10.109c.15955.27419.70847.38475,1.0969.45006.87685.14745,1.76647.21894,2.6518.32135A26.03856,26.03856,0,0,0,458.97723,512.2a1.61779,1.61779,0,0,1-1.28147-.51942,10.779,10.779,0,0,1-2.60028-9.46769A17.04982,17.04982,0,0,1,464.892,488.9197a17.41038,17.41038,0,0,1,2.84578-.82886,30.31418,30.31418,0,0,1,3.24272.27753A33.15029,33.15029,0,0,1,474.21063,489.298Z" transform="translate(-439 -439)"/><path class="cls-8" d="M498.1262,452.84574a4.42566,4.42566,0,0,1-.558.984,89.96367,89.96367,0,0,0-13.15392,18.20211c-1.13,1.95824-2.2536,3.93094-3.19929,5.98046a15.79855,15.79855,0,0,0-.948,3.6632c-.055.28828.30944.65659.48171.98827-2.34576-.41834-4.69845-.80751-7.03115-1.2928a1.23676,1.23676,0,0,1-.67381-.9644,13.89392,13.89392,0,0,1,2.61327-7.68751,37.50248,37.50248,0,0,1,4.03415-5.01191,95.50457,95.50457,0,0,1,17.28388-14.25412C497.3408,453.22213,497.74168,453.0469,498.1262,452.84574Z" transform="translate(-439 -439)"/><path class="cls-9" d="M474.21063,489.298a33.15029,33.15029,0,0,0-3.2301-.92958,30.31418,30.31418,0,0,0-3.24272-.27753,14.31064,14.31064,0,0,1,7.43126.73255Z" transform="translate(-439 -439)"/><path class="cls-10" d="M498.39753,555.184q.84483-.00024,1.68969-.00044Q499.24242,555.18381,498.39753,555.184Z" transform="translate(-439 -439)"/><path class="cls-8" d="M498.38391,452.64152l.08526.18839q-.16815.01538-.33653.03052Q498.25806,452.75075,498.38391,452.64152Z" transform="translate(-439 -439)"/><path class="cls-11" d="M507.10945,527.89492q.31895-.1551.63786-.31006.36183-.21081.72372-.42182c.73888-.29159,1.46105-.64,2.22005-.86326a3.27455,3.27455,0,0,1,4.01623,1.49793,3.08323,3.08323,0,0,1-.74125,4.19558,25.40165,25.40165,0,0,1-5.80685,3.22409,20.49855,20.49855,0,0,1-17.625-1.483,8.6927,8.6927,0,0,1-2.28908-1.87756,2.88743,2.88743,0,0,1-.22885-3.83962,3.28519,3.28519,0,0,1,3.83521-1.46292c1.09326.35419,2.13425.86966,3.19854,1.31324a26.81753,26.81753,0,0,0,4.699,1.555,7.77218,7.77218,0,0,0,5.64236-.82216l.43922-.039Q506.47,528.22817,507.10945,527.89492Z" transform="translate(-439 -439)"/><path class="cls-2" d="M512.50839,515.46239c-2.76265-.02247-4.94587-2.53275-4.94911-5.69056a5.17283,5.17283,0,0,1,4.88242-5.32907,5.546,5.546,0,0,1,5.29147,5.44117A5.43583,5.43583,0,0,1,512.50839,515.46239Z" transform="translate(-439 -439)"/><path class="cls-11" d="M489.82253,515.4628c-2.85237-.0145-4.91042-2.4515-4.88815-5.78824a5.02778,5.02778,0,0,1,4.7862-5.231,5.51689,5.51689,0,0,1,.10195,11.01925Z" transform="translate(-439 -439)"/><path class="cls-12" d="M505.39143,528.6003a7.77218,7.77218,0,0,1-5.64236.82216,26.81753,26.81753,0,0,1-4.699-1.555c.9882.25959,1.98594.48786,2.96262.78528a10.99617,10.99617,0,0,0,6.20135.0416A6.27085,6.27085,0,0,1,505.39143,528.6003Z" transform="translate(-439 -439)"/><path class="cls-12" d="M507.10945,527.89492q-.6394.33321-1.2788.66637Q506.47006,528.228,507.10945,527.89492Z" transform="translate(-439 -439)"/><path class="cls-12" d="M508.471,527.163q-.36187.211-.72372.42182Q508.10919,527.37384,508.471,527.163Z" transform="translate(-439 -439)"/></svg>',
      'dex-guru': '<svg viewBox="0 0 41 40" fill="none" class="logo-icon"><g clip-path="url(#clip0)"><path d="M20.0537 40C31.129 40 40.1074 31.0457 40.1074 20C40.1074 8.9543 31.129 0 20.0537 0C8.97834 0 0 8.9543 0 20C0 31.0457 8.97834 40 20.0537 40Z" fill="#2D3642"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M20.0661 6.90122C18.6211 6.90122 17.493 7.46701 16.7465 8.38602C16.0236 9.27608 15.7211 10.4172 15.7211 11.5062C15.7211 12.6577 16.176 13.9524 16.8788 14.9627C17.5671 15.9521 18.6664 16.9012 20.0661 16.9012C21.4639 16.9012 22.5633 15.9574 23.2529 14.968C23.9566 13.9582 24.411 12.6632 24.411 11.5062C24.411 10.42 24.1223 9.27681 23.4014 8.38372C22.6553 7.45936 21.5232 6.90122 20.0661 6.90122ZM17.7017 11.5062C17.7017 10.7556 17.9129 10.0881 18.2855 9.62938C18.6346 9.19963 19.1838 8.87653 20.0661 8.87653C20.9733 8.87653 21.5185 9.2011 21.8586 9.62242C22.224 10.075 22.4304 10.7405 22.4304 11.5062C22.4304 12.201 22.1359 13.1097 21.6265 13.8406C21.1029 14.5919 20.525 14.9259 20.0661 14.9259C19.6089 14.9259 19.0309 14.5911 18.5061 13.8367C17.9957 13.1031 17.7017 12.1941 17.7017 11.5062Z" fill="url(#paint0_linear)"></path><path d="M13.4578 21.3643C11.4505 21.1419 9.79165 22.7433 9.79165 24.3827C9.79165 26.0136 11.0809 27.4938 13.5053 27.4938C14.3771 27.4938 15.2677 27.1126 16.2461 26.4022C17.3855 25.5748 18.3307 24.6022 19.277 23.6283C20.2258 22.6519 21.1759 21.6742 22.3241 20.8404C23.4625 20.0138 24.7629 19.3704 26.2307 19.3704C29.5748 19.3704 31.925 21.5691 31.925 24.4568C31.925 27.3357 29.1773 29.7835 26.0601 29.4385C24.8084 29.3012 23.3404 28.8789 22.1602 27.7321L23.5424 26.3173C24.2931 27.0468 25.2758 27.3653 26.277 27.475L26.2782 27.4752C28.2855 27.6976 29.9443 26.0962 29.9443 24.4568C29.9443 22.8259 28.6551 21.3457 26.2307 21.3457C25.3589 21.3457 24.4683 21.7269 23.4899 22.4373C22.3505 23.2647 21.4053 24.2373 20.459 25.2112C19.5102 26.1876 18.5601 27.1653 17.4119 27.9991C16.2735 28.8257 14.9731 29.4691 13.5053 29.4691C10.1612 29.4691 7.81104 27.2704 7.81104 24.3827C7.81104 21.5038 10.5587 19.056 13.676 19.401C14.9276 19.5383 16.3956 19.9606 17.5758 21.1074L16.1936 22.5222C15.4429 21.7927 14.4602 21.4742 13.459 21.3645L13.4578 21.3643Z" fill="url(#paint1_linear)"></path></g><defs><linearGradient id="paint0_linear" x1="6.75072" y1="16.3889" x2="22.7958" y2="32.477" gradientUnits="userSpaceOnUse"><stop stop-color="#6046FF"></stop><stop offset="1" stop-color="#46D7AB"></stop></linearGradient><linearGradient id="paint1_linear" x1="6.75072" y1="16.3889" x2="22.7958" y2="32.477" gradientUnits="userSpaceOnUse"><stop stop-color="#6046FF"></stop><stop offset="1" stop-color="#46D7AB"></stop></linearGradient><clipPath id="clip0"><rect width="40.1074" height="40" fill="white"></rect></clipPath></defs></svg>',
      'bitcoin': '<svg id="Bitcoin_Logo" x="0px" y="0px" viewBox="0 90.7 612 611.1" enable-background="new 0 90.7 612 611.1" xml:space="preserve"><path id="PMS_130_Coin" fill="#F2A900" d="M602.7,470c-40.8,163.6-206.6,263.5-370.6,222.7C68.4,651.8-31.4,486.1,9.4,322.5,S215.9,59,379.5,99.8C543.6,140.1,643.4,306.3,602.7,470z"/><path id="Bitcoin_Symbol" fill="#FFFFFF" d="M450.9,356.5c5.5-40.8-25.5-62.1-68-76.5l13.2-55.2l-33.6-8.1l-12.8,54,c-8.9-2.1-17.9-4.2-26.8-6l12.8-54l-34-8.1l-13.2,55.2c-7.2-1.7-14.5-3-21.7-4.7l0,0l-46.3-11.1l-8.5,35.7c0,0,25.1,5.5,24.2,6,c13.6,3.4,16.2,12.3,15.7,19.1l-14.9,62.9c0.9,0.4,2.1,0.4,3.4,1.3c-1.3-0.4-2.1-0.4-3.4-0.8l-20.4,88c-1.7,4.2-6,10.2-15.3,8.1,c0.4,0.4-24.7-6-24.7-6L160.7,495l43.8,10.2c8.1,2.1,16.2,3.8,23.8,6l-13.2,55.7l33.6,8.1l13.2-55.2c9.4,2.5,18.3,4.7,26.8,6.8,l-13.2,54.8l33.6,8.1l13.2-55.7c57.4,10.2,100.3,5.5,117.7-46.8c14-41.7-1.3-65.5-31.9-81.2C430.5,400.7,446.7,386.2,450.9,356.5z M375.3,464.8c-9.8,41.7-80.3,20-102.9,14.5l17.4-74C312.8,410.9,385.5,421.1,375.3,464.8z M384.6,356.5,c-8.9,37.8-67.6,19.6-86.7,14.9l16.2-67.1C332.8,308.9,394,317,384.6,356.5z"/></svg>',
      'bsc': '<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2500 2500"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1-2"><path d="M764.48,1050.52,1250,565l485.75,485.73,282.5-282.5L1250,0,482,768l282.49,282.5M0,1250,282.51,967.45,565,1249.93994,282.49,1532.45Zm764.48,199.51L1250,1935l485.74-485.72,282.65,282.35-.14.15L1250,2500,482,1732l-.4-.4,282.91-282.12M1935,1250.12l282.51-282.51L2500,1250.1l-282.5,282.51Z" style="fill:#f3ba2f"/><path d="M1536.52,1249.85h.12L1250,963.19,1038.13,1175h0l-24.34,24.35-50.2,50.21-.4.39.4.41L1250,1536.81006l286.66-286.66.14-.16-.26-.14" style="fill:#f3ba2f"/></g></g></svg>',
      'pancakeswap': '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 31.7 32" style="enable-background:new 0 0 31.7 32;" xml:space="preserve"><style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;fill:#633001;}.st1{fill:#FEDC90;}.st2{fill-rule:evenodd clip-rule:evenodd;fill:#D1884F;}.st3{fill:#633001;}</style><path class="st0" d="M5.7,5C5.2,2.4,7.2,0,9.8,0c2.3,0,4.2,1.9,4.2,4.2v5.2c0.6,0,1.2-0.1,1.8-0.1c0.6,0,1.1,0,1.7,0.1V4.2 c0-2.3,1.9-4.2,4.2-4.2c2.6,0,4.6,2.4,4.2,5l-1.1,6.1c3.9,1.7,6.9,4.7,6.9,8.4v2.3c0,3.1-2,5.7-4.9,7.4c-2.9,1.8-6.7,2.8-11,2.8 s-8.1-1-11-2.8C2,27.5,0,24.9,0,21.8v-2.3c0-3.7,2.9-6.7,6.8-8.4L5.7,5z M23.3,11.9l1.3-7.2c0.3-1.8-1-3.5-2.9-3.5 c-1.6,0-2.9,1.3-2.9,2.9v6.6c-0.4-0.1-0.9-0.1-1.3-0.1c-0.6,0-1.1-0.1-1.7-0.1c-0.6,0-1.2,0-1.8,0.1c-0.4,0-0.9,0.1-1.3,0.1V4.2 c0-1.6-1.3-2.9-2.9-2.9C8,1.3,6.6,3,7,4.8L8.3,12c-4.2,1.6-7,4.4-7,7.6v2.3c0,4.9,6.5,8.9,14.5,8.9c8,0,14.5-4,14.5-8.9v-2.3 C30.4,16.3,27.6,13.5,23.3,11.9z"/><path class="st1" d="M30.4,21.8c0,4.9-6.5,8.9-14.5,8.9c-8,0-14.5-4-14.5-8.9v-2.3h29.1V21.8z"/><path class="st2" d="M7,4.8C6.6,3,8,1.3,9.8,1.3c1.6,0,2.9,1.3,2.9,2.9v6.6c1-0.1,2-0.2,3.1-0.2c1,0,2,0.1,3,0.2V4.2 c0-1.6,1.3-2.9,2.9-2.9c1.8,0,3.2,1.7,2.9,3.5l-1.3,7.2c4.2,1.6,7.1,4.4,7.1,7.6c0,4.9-6.5,8.9-14.5,8.9c-8,0-14.5-4-14.5-8.9 c0-3.2,2.8-6,7-7.6L7,4.8z"/><path class="st3" d="M11.8,18.9c0,1.3-0.7,2.4-1.6,2.4c-0.9,0-1.6-1.1-1.6-2.4s0.7-2.4,1.6-2.4C11.1,16.5,11.8,17.6,11.8,18.9z"/><path class="st3" d="M22.9,18.9c0,1.3-0.7,2.4-1.6,2.4c-0.9,0-1.6-1.1-1.6-2.4s0.7-2.4,1.6-2.4C22.2,16.5,22.9,17.6,22.9,18.9z"/></svg>',
    })
  }

  ngOnInit(): void {
    // Store previousUrl w/URL Service Subscription
    this._router.events.pipe(
      filter((event) => event instanceof NavigationEnd)
    ).subscribe(
      (event: any) => {
        this.previousUrl = this.currentUrl;
        this.currentUrl = event.url;
        this.urlService.setPreviousUrl(this.previousUrl);
      }
    );
    // Auth0 idTokenClaims Subscriber
    this.auth.idTokenClaims$.pipe(
      takeUntil(this.unsub$)
    ).subscribe(
      idTokenClaims => {
        if (this.admin.is_frontend_admin(idTokenClaims)) { this.is_frontend_admin = true; }
      }
    );
  }
  ngOnDestroy() {
    this.unsub$.next();
    this.unsub$.complete();
  }


  showStoryHeader(): boolean {
    const paths = this._router.url.split('/')
    let newStoryURL = false;if (this._router.url == '/new-story') { newStoryURL = true}
    let editStoryURL = false;if(paths.length == 4) { if(paths[1] === 'me') { if(paths[3] === 'edit') { editStoryURL= true; } } }
    return (newStoryURL || editStoryURL);
  }

}
